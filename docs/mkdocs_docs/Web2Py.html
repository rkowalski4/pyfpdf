
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Simple PDF generation for Python (FPDF PHP port) [FORK]">
      
      
      
      
        <link rel="canonical" href="https://alexanderankin.github.io/pyfpdf/Web2Py.html">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.3">
    
    
      
        <title>Introduction # - PyFPDF</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.3b61ea93.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.39b8e14a.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://alexanderankin.github.io/pyfpdf/" title="PyFPDF" class="md-header-nav__button md-logo" aria-label="PyFPDF">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            PyFPDF
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Introduction #
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/alexanderankin/pyfpdf/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://alexanderankin.github.io/pyfpdf/" title="PyFPDF" class="md-nav__button md-logo" aria-label="PyFPDF">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    PyFPDF
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/alexanderankin/pyfpdf/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="index.html" class="md-nav__link">
      Project Home
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="Tutorial.html" class="md-nav__link">
      Tutorial
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
    
    <label class="md-nav__link" for="nav-3">
      Tutorial Translations
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tutorial Translations" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Tutorial Translations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="Tutorial-es.html" class="md-nav__link">
      Tutorial (Spanish translation)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="FAQ.html" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="Development.html" class="md-nav__link">
      Development
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="Templates.html" class="md-nav__link">
      Templates
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="Unicode.html" class="md-nav__link">
      Unicode
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
    
    <label class="md-nav__link" for="nav-8">
      ReferenceManual
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="ReferenceManual" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        ReferenceManual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="ReferenceManual.html" class="md-nav__link">
      Reference Manual
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/accept_page_break.html" class="md-nav__link">
      accept_page_break
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/add_font.html" class="md-nav__link">
      add_font
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/add_link.html" class="md-nav__link">
      add_link
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/add_page.html" class="md-nav__link">
      add_page
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/alias_nb_pages.html" class="md-nav__link">
      alias_nb_pages
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/cell.html" class="md-nav__link">
      cell
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/close.html" class="md-nav__link">
      close
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/code39.html" class="md-nav__link">
      code39
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/dashed_line.html" class="md-nav__link">
      dashed_line
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/ellipse.html" class="md-nav__link">
      ellipse
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/error.html" class="md-nav__link">
      error
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/FPDF.html" class="md-nav__link">
      FPDF
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/footer.html" class="md-nav__link">
      footer
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/get_string_width.html" class="md-nav__link">
      get_string_width
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/get_x.html" class="md-nav__link">
      get_x
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/get_y.html" class="md-nav__link">
      get_y
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/header.html" class="md-nav__link">
      header
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/image.html" class="md-nav__link">
      image
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/interleaved2of5.html" class="md-nav__link">
      interleaved2of5
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/load_resource.html" class="md-nav__link">
      load_resource
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/line.html" class="md-nav__link">
      line
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/link.html" class="md-nav__link">
      link
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/ln.html" class="md-nav__link">
      ln
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/multi_cell.html" class="md-nav__link">
      multi_cell
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/open.html" class="md-nav__link">
      open
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/output.html" class="md-nav__link">
      output
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/page_no.html" class="md-nav__link">
      page_no
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/rect.html" class="md-nav__link">
      rect
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_author.html" class="md-nav__link">
      set_author
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_auto_page_break.html" class="md-nav__link">
      set_auto_page_break
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_compression.html" class="md-nav__link">
      set_compression
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_creator.html" class="md-nav__link">
      set_creator
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_doc_option.html" class="md-nav__link">
      set_doc_option
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_display_mode.html" class="md-nav__link">
      set_display_mode
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_draw_color.html" class="md-nav__link">
      set_draw_color
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_fill_color.html" class="md-nav__link">
      set_fill_color
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_font.html" class="md-nav__link">
      set_font
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_font_size.html" class="md-nav__link">
      set_font_size
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_keywords.html" class="md-nav__link">
      set_keywords
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_left_margin.html" class="md-nav__link">
      set_left_margin
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_line_width.html" class="md-nav__link">
      set_line_width
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_link.html" class="md-nav__link">
      set_link
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_margins.html" class="md-nav__link">
      set_margins
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_right_margin.html" class="md-nav__link">
      set_right_margin
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_stretching.html" class="md-nav__link">
      set_stretching
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_subject.html" class="md-nav__link">
      set_subject
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_text_color.html" class="md-nav__link">
      set_text_color
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_title.html" class="md-nav__link">
      set_title
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_top_margin.html" class="md-nav__link">
      set_top_margin
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_x.html" class="md-nav__link">
      set_x
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_xy.html" class="md-nav__link">
      set_xy
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/set_y.html" class="md-nav__link">
      set_y
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/text.html" class="md-nav__link">
      text
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/write.html" class="md-nav__link">
      write
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="reference/write_html.html" class="md-nav__link">
      write_html
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/alexanderankin/pyfpdf/edit/master/mkdocs_docs/Web2Py.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="introduction">Introduction</h1>
<p>If you use <a href="http://www.web2py.com">web2py</a>, you can make complex reports that can be viewed in a browser, or downloaded as PDF (taking advantage of web2py HTML helper objects to easily diagram a report). See <a href="reference/write_html.html">write_html</a> for more information, supported tags and attributes, etc.</p>
<p>Also, using web2py DAL, you can easily set up a templating engine for PDF documents. See <a href="Templates.html">Templates</a> for more information.</p>
<p>The following examples are packaged in a ready to run application:
<a href="http://pyfpdf.googlecode.com/files/web2py.app.fpdf.w2p">web2py.app.fpdf.w2p</a>.</p>
<p>PyFPDF is included in <a href="http://www.web2py.com/">web2py</a> since release <a href="http://www.web2py.com/examples/default/download">1.85.2</a>.</p>
<p>Also, you can download the latest version of <a href="http://pyfpdf.googlecode.com/files/pyfpdf-1.54b.zip">pyfpdf</a> and uncompress it in the <code>web2py, gluon, contrib</code> folder.</p>
<p><strong>Note about images</strong>: these sample images are small so they may look like low quality ones. For better results, use bigger images: more DPI (screen is often 72/96DPI, printers are often 300/600DPI). As a rule of thumb, use at least half of the image size when rendering to PDF, ie. if an image is 500x200px, use 250x100px as width and height attributes of the IMG tag.</p>
<h1 id="sample-report">Sample Report</h1>
<p>You could make a "professional looking" bussiness report just using web2py HTML helpers, mixin headers, logos, charts, text and tables.</p>
<p>The main advantage of this method is that the same report can be rendered in a HTML view, or can be downloaded as PDF, with a minimal effort:</p>
<p>Sample: <a href="http://pyfpdf.googlecode.com/files/report.pdf">report.pdf</a></p>
<p>Updated Live Demo (HTML and PDF version):</p>
<ul>
<li><a href="http://www.web2py.com.ar/fpdf/default/report">http://www.web2py.com.ar/fpdf/default/report</a></li>
<li><a href="http://www.web2py.com.ar/fpdf/default/report.pdf">http://www.web2py.com.ar/fpdf/default/report.pdf</a></li>
</ul>
<pre><code class="language-python">def report():
    response.title = &quot;web2py sample report&quot;

    # include a google chart (download it dynamically!)
    url = &quot;http://chart.apis.google.com/chart?cht=p3&amp;chd=t:60,40&amp;chs=500x200&amp;chl=Hello|World&amp;.png&quot;
    chart = IMG(_src=url, _width=&quot;250&quot;, _height=&quot;100&quot;)

    # create a small table with some data:
    rows = [THEAD(TR(TH(&quot;Key&quot;, _width=&quot;70%&quot;), TH(&quot;Value&quot;, _width=&quot;30%&quot;))),
            TBODY(TR(TD(&quot;Hello&quot;), TD(&quot;60&quot;)), 
                  TR(TD(&quot;World&quot;), TD(&quot;40&quot;)))]
    table = TABLE(*rows, _border=&quot;0&quot;, _align=&quot;center&quot;, _width=&quot;50%&quot;)

    if request.extension == &quot;pdf&quot;:
        from gluon.contrib.pyfpdf import FPDF, HTMLMixin

        # create a custom class with the required functionality 
        class MyFPDF(FPDF, HTMLMixin):
            def header(self): 
                &quot;hook to draw custom page header (logo and title)&quot;
                logo = os.path.join(request.env.web2py_path, &quot;gluon&quot;, &quot;contrib&quot;, &quot;pyfpdf&quot;, &quot;tutorial&quot;, &quot;logo_pb.png&quot;)
                self.image(logo, 10, 8, 33)
                self.set_font('Arial', 'B', 15)
                self.cell(65) # padding
                self.cell(60, 10, response.title, 1, 0, 'C')
                self.ln(20)

            def footer(self):
                &quot;hook to draw custom page footer (printing page numbers)&quot;
                self.set_y(-15)
                self.set_font('Arial', 'I', 8)
                txt = 'Page %s of %s' % (self.page_no(), self.alias_nb_pages())
                self.cell(0, 10, txt, 0, 0, 'C')

        pdf = MyFPDF()
        # create a page and serialize/render HTML objects
        pdf.add_page()
        pdf.write_html(str(XML(table, sanitize=False)))
        pdf.write_html(str(XML(CENTER(chart), sanitize=False)))
        # prepare PDF to download:
        response.headers['Content-Type'] = 'application/pdf'
        return pdf.output(dest='S')
    else:
        # normal html view:
        return dict(chart=chart, table=table)

</code></pre>
<h1 id="sample-table-listing">Sample Table Listing</h1>
<p>Also, you can make nice tables that automatically spreads over several pages, with headers and footers, column and row highlighting, etc., in a very pythonic way:</p>
<p>Sample: <a href="http://pyfpdf.googlecode.com/files/listing.pdf">listing.pdf</a></p>
<p>Updated Live Demo (HTML and PDF version):</p>
<ul>
<li><a href="http://www.web2py.com.ar/fpdf/default/listing">http://www.web2py.com.ar/fpdf/default/listing</a></li>
<li><a href="http://www.web2py.com.ar/fpdf/default/listing.pdf">http://www.web2py.com.ar/fpdf/default/listing.pdf</a></li>
</ul>
<pre><code class="language-python">def listing():
    response.title = &quot;web2py sample listing&quot;

    # define header and footers:
    head = THEAD(TR(TH(&quot;Header 1&quot;, _width=&quot;50%&quot;), 
                    TH(&quot;Header 2&quot;, _width=&quot;30%&quot;),
                    TH(&quot;Header 3&quot;, _width=&quot;20%&quot;), 
                    _bgcolor=&quot;#A0A0A0&quot;))
    foot = TFOOT(TR(TH(&quot;Footer 1&quot;, _width=&quot;50%&quot;), 
                    TH(&quot;Footer 2&quot;, _width=&quot;30%&quot;),
                    TH(&quot;Footer 3&quot;, _width=&quot;20%&quot;),
                    _bgcolor=&quot;#E0E0E0&quot;))

    # create several rows:
    rows = []
    for i in range(1000):
        col = i % 2 and &quot;#F0F0F0&quot; or &quot;#FFFFFF&quot;
        rows.append(TR(TD(&quot;Row %s&quot; %i),
                       TD(&quot;something&quot;, _align=&quot;center&quot;),
                       TD(&quot;%s&quot; % i, _align=&quot;right&quot;),
                       _bgcolor=col)) 

    # make the table object
    body = TBODY(*rows)
    table = TABLE(*[head, foot, body], 
                  _border=&quot;1&quot;, _align=&quot;center&quot;, _width=&quot;100%&quot;)

    if request.extension == &quot;pdf&quot;:
        from gluon.contrib.pyfpdf import FPDF, HTMLMixin

        # define our FPDF class (move to modules if it is reused frequently)
        class MyFPDF(FPDF, HTMLMixin):
            def header(self):
                self.set_font('Arial', 'B', 15)
                self.cell(0, 10, response.title, 1, 0, 'C')
                self.ln(20)

            def footer(self):
                self.set_y(-15)
                self.set_font('Arial', 'I', 8)
                txt = 'Page %s of %s' % (self.page_no(), self.alias_nb_pages())
                self.cell(0, 10, txt, 0, 0, 'C')

        pdf = MyFPDF()
        # first page:
        pdf.add_page()
        pdf.write_html(str(XML(table, sanitize=False)))
        response.headers['Content-Type'] = 'application/pdf'
        return pdf.output(dest='S')
    else:
        # normal html view:
        return dict(table=table)}}}
</code></pre>
<h1 id="samples-template-definitions">Samples Template Definitions</h1>
<p>As stated in the <a href="Templates.html">Templates</a> page, there are 3 ways of putting your templates in place. As in that page there are samples for the manually hardcoded way and CSV document loading. Here we will only show a sample of the template engine.</p>
<h1 id="sample-templating-engine">Sample Templating Engine</h1>
<p>PyFPDF and web2py can be used to make PDF documents using templates like invoices, badges, certificates, etc.:</p>
<p>Sample: <a href="http://pyfpdf.googlecode.com/files/invoice.pdf">invoice.pdf</a></p>
<p>Updated Live Demo: <a href="http://www.web2py.com.ar/fpdf/default/invoice.pdf">http://www.web2py.com.ar/fpdf/default/invoice.pdf</a></p>
<p>To handle multiple templates, we can define two tables in web2py:</p>
<ul>
<li>pdf_template: general document information (name, paper size, etc.)</li>
<li>pdf_element: several rows for each document, describing graphics primitives and placeholders.</li>
</ul>
<p>In <code>db.py</code> write:</p>
<pre><code class="language-python">db.define_table(&quot;pdf_template&quot;,
    Field(&quot;pdf_template_id&quot;, &quot;id&quot;),
    Field(&quot;title&quot;),
    Field(&quot;format&quot;, requires=IS_IN_SET([&quot;A4&quot;, &quot;legal&quot;, &quot;letter&quot;])),
)

db.define_table(&quot;pdf_element&quot;,
    Field(&quot;pdf_template_id&quot;, db.pdf_template, requires=IS_IN_DB(db, 'pdf_template.pdf_template_id', 'pdf_template.title')),
    Field(&quot;name&quot;, requires=IS_NOT_EMPTY()),
    Field(&quot;type&quot;, length=2, requires=IS_IN_SET(['T', 'L', 'I', 'B', 'BC'])),
    Field(&quot;x1&quot;, &quot;double&quot;, requires=IS_NOT_EMPTY()),
    Field(&quot;y1&quot;, &quot;double&quot;, requires=IS_NOT_EMPTY()),
    Field(&quot;x2&quot;, &quot;double&quot;, requires=IS_NOT_EMPTY()),
    Field(&quot;y2&quot;, &quot;double&quot;, requires=IS_NOT_EMPTY()),
    Field(&quot;font&quot;, default=&quot;Arial&quot;, requires=IS_IN_SET(['Courier', 'Arial', 'Times', 'Symbol', 'Zapfdingbats'])),
    Field(&quot;size&quot;, &quot;double&quot;, default=&quot;10&quot;, requires=IS_NOT_EMPTY()),
    Field(&quot;bold&quot;, &quot;boolean&quot;),
    Field(&quot;italic&quot;, &quot;boolean&quot;),
    Field(&quot;underline&quot;, &quot;boolean&quot;),
    Field(&quot;foreground&quot;, &quot;integer&quot;, default=0x000000, comment=&quot;Color text&quot;),
    Field(&quot;background&quot;, &quot;integer&quot;, default=0xFFFFFF, comment=&quot;Fill color&quot;),
    Field(&quot;align&quot;, &quot;string&quot;, length=1, default=&quot;L&quot;, requires=IS_IN_SET(['L', 'R', 'C', 'J'])),
    Field(&quot;text&quot;, &quot;text&quot;, comment=&quot;Default text&quot;),
    Field(&quot;priority&quot;, &quot;integer&quot;, default=0, comment=&quot;Z-Order&quot;),
    )
</code></pre>
<p><strong>Warning</strong>: the fields "type", "size" and "text" are reserved words for some DB engines, so validation:</p>
<pre><code class="language-python">db = DAL('sqlite://storage.sqlite', pool_size=1, check_reserved=['ALL'])
</code></pre>
<p>will fail. sqlite, MySQL and postgres work OK. Proposals for new naming ideas are welcome.</p>
<p>At this point you could go to web2py AppAdmin and start to define your document templates, or use import/export functions to reuse your already defined formats!</p>
<p>Note: if you used designer.py to create the templates, and you want to import the templates with the Web2Py database admin, you will have to modify the file.</p>
<p>So, designer.py outputs a file like this:</p>
<pre><code>line0;T;20.0;13.0;190.0;13.0;times;10.0;0;0;0;0;65535;C;;0
line1;T;20.0;67.0;190.0;67.0;times;10.0;0;0;0;0;65535;C;;0
name0;T;21;14;104;25;times;16.0;0;0;0;0;0;C;;2
title0;T;64;26;104;30;times;10.0;0;0;0;0;0;C;;2
</code></pre>
<p>You will have to make it look lke this:</p>
<pre><code>pdf_element.pdf_template_id, pdf_element.name, pdf_element.type, pdf_element.x1, pdf_element.y1, pdf_element.x2, pdf_element.y2, pdf_element.font, pdf_element.size, pdf_element.bold, pdf_element.italic, pdf_element.underline, pdf_element.foreground, pdf_element.background, pdf_element.align, pdf_element.text, pdf_element.priority
1,line0,T,20.0,283.0,190.0,283.0,times,10.0,0,0,0,0,65535,C,,0
1,line1,T,20.0,337.0,190.0,337.0,times,10.0,0,0,0,0,65535,C,,0
1,name0,T,21,14,104,25,times,16.0,0,0,0,0,0,C,,2
1,title0,T,64,26,104,30,times,10.0,0,0,0,0,0,C,,2
</code></pre>
<p>Where the first number indicates the template ID (important for the database system), and the first line indicates the database fields to fill.</p>
<p>A simple Python script should do the trick.</p>
<p>After defining and filling your database, you can use PyFPDF <a href="Templates.html">Templates</a> directly reading row elements from the web2py database:</p>
<p>For example, for an invoice, in a controller you could write:</p>
<pre><code class="language-python">def invoice():
    from gluon.contrib.pyfpdf import Template
    import os.path

    # generate sample invoice (according Argentina's regulations)

    import random
    from decimal import Decimal

    # read elements from db 

    elements = db(db.pdf_element.pdf_template_id == 1).select(orderby=db.pdf_element.priority)

    f = Template(format=&quot;A4&quot;,
             elements = elements,
             title=&quot;Sample Invoice&quot;, author=&quot;Sample Company&quot;,
             subject=&quot;Sample Customer&quot;, keywords=&quot;Electronic TAX Invoice&quot;)

    # create some random invoice line items and detail data
    detail = &quot;Lorem ipsum dolor sit amet, consectetur. &quot; * 5
    items = []
    for i in range(1, 30):
        ds = &quot;Sample product %s&quot; % i
        qty = random.randint(1, 10)
        price = round(random.random() * 100, 3)
        code = &quot;%s%s%02d&quot; % (chr(random.randint(65, 90)), chr(random.randint(65, 90)), i)
        items.append(dict(code=code, unit='u',
                          qty=qty, price=price, 
                          amount=qty * price,
                          ds=&quot;%s: %s&quot; % (i, ds)))

    # divide and count lines
    lines = 0
    li_items = []
    for it in items:
        qty = it['qty']
        code = it['code']
        unit = it['unit']
        for ds in f.split_multicell(it['ds'], 'item_description01'):
            # add item description line (without price nor amount)
            li_items.append(dict(code=code, ds=ds, qty=qty, unit=unit, price=None, amount=None))
            # clean qty and code (show only at first)
            unit = qty = code = None
        # set last item line price and amount
        li_items[-1].update(amount = it['amount'],
                            price = it['price'])

    # split detail into each line description
    obs=&quot;\n&lt;U&gt;Detail:&lt;/U&gt;\n\n&quot; + detail
    for ds in f.split_multicell(obs, 'item_description01'):
        li_items.append(dict(code=code, ds=ds, qty=qty, unit=unit, price=None, amount=None))

    # calculate pages:
    lines = len(li_items)
    max_lines_per_page = 24
    pages = lines / (max_lines_per_page - 1)
    if lines % (max_lines_per_page - 1): pages = pages + 1

    # fill placeholders for each page
    for page in range(1, pages + 1):
        f.add_page()
        f['page'] = 'Page %s of %s' % (page, pages)
        if pages &gt; 1 and page &lt; pages:
            s = 'Continues on page %s' % (page + 1)
        else:
            s = ''
        f['item_description%02d' % (max_lines_per_page + 1)] = s

        f[&quot;company_name&quot;] = &quot;Sample Company&quot;
        f[&quot;company_logo&quot;] = os.path.join(request.env.web2py_path, &quot;gluon&quot;, &quot;contrib&quot;, &quot;pyfpdf&quot;, &quot;tutorial&quot;, &quot;logo.png&quot;)
        f[&quot;company_header1&quot;] = &quot;Some Address - somewhere -&quot;
        f[&quot;company_header2&quot;] = &quot;http://www.example.com&quot;        
        f[&quot;company_footer1&quot;] = &quot;Tax Code ...&quot;
        f[&quot;company_footer2&quot;] = &quot;Tax/VAT ID ...&quot;
        f['number'] = '0001-00001234'
        f['issue_date'] = '2010-09-10'
        f['due_date'] = '2099-09-10'
        f['customer_name'] = &quot;Sample Client&quot;
        f['customer_address'] = &quot;Siempreviva 1234&quot;

        # print line item...
        li = 0 
        k = 0
        total = Decimal(&quot;0.00&quot;)
        for it in li_items:
            k = k + 1
            if k &gt; page * (max_lines_per_page - 1):
                break
            if it['amount']:
                total += Decimal(&quot;%.6f&quot; % it['amount'])
            if k &gt; (page - 1) * (max_lines_per_page - 1):
                li += 1
                if it['qty'] is not None:
                    f['item_quantity%02d' % li] = it['qty']
                if it['code'] is not None:
                    f['item_code%02d' % li] = it['code']
                if it['unit'] is not None:
                    f['item_unit%02d' % li] = it['unit']
                f['item_description%02d' % li] = it['ds']
                if it['price'] is not None:
                    f['item_price%02d' % li] = &quot;%0.3f&quot; % it['price']
                if it['amount'] is not None:
                    f['item_amount%02d' % li] = &quot;%0.2f&quot; % it['amount']

        # last page? print totals:
        if pages == page:
            f['net'] = &quot;%0.2f&quot; % (total / Decimal(&quot;1.21&quot;))
            f['vat'] = &quot;%0.2f&quot; % (total * (1 - 1 / Decimal(&quot;1.21&quot;)))
            f['total_label'] = 'Total:'
        else:
            f['total_label'] = 'SubTotal:'
        f['total'] = &quot;%0.2f&quot; % total

    response.headers['Content-Type'] = 'application/pdf'
    return f.render('invoice.pdf', dest='S')
</code></pre>
<p>Of course, this is a hardcoded example. You can use the database to store invoices or any other data; there is no rigid class hierachy to follow, just fill your template like a dict!</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.08c56446.min.js"></script>
      <script src="assets/javascripts/bundle.6ced434e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>